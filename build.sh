#!/bin/bash

# ุณูุฑูุจุช ุจูุงุก ูุญุณู ูู Vercel
echo "๐ ุจุฏุก ุนูููุฉ ุงูุจูุงุก ูู Vercel..."

# 1. ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช
echo "๐ฆ ุชุซุจูุช ุงูุงุนุชูุงุฏูุงุช..."
npm install

# 2. ุชูููุฏ Prisma Client
echo "๐ง ุชูููุฏ Prisma Client..."
npm run db:generate

# 3. ุงูุชุญูู ูู ุตุญุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงุฎุชูุงุฑู)
echo "๐ ุงูุชุญูู ูู ุตุญุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
if [ -n "$DATABASE_URL" ]; then
    npm run db:push
fi

# 4. ุจูุงุก ุงูุชุทุจูู
echo "๐๏ธ ุจูุงุก ุงูุชุทุจูู..."
npm run build

# 5. ุชูุธูู ุงููููุงุช ุงููุคูุชุฉ
echo "๐งน ุชูุธูู ุงููููุงุช ุงููุคูุชุฉ..."
rm -rf .next/cache

echo "โ ุงูุชููุช ุนูููุฉ ุงูุจูุงุก ุจูุฌุงุญ!"